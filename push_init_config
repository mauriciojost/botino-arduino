#!/usr/bin/env bash

DEVICE=${1:-dev1}

PRETTY='python -m json.tool'

# Set up general settings
url="http://dweet.io/dweet/for/$DEVICE-settings-target?"
url+='lcddebug=true&' # turn on LCD DEBUG (show logs in LCD)
url+='crashclear=false&' # do not clear debug info (stacktraces) from device
url+='loglevel=0' # log level to DEBUG (lowest)
curl -XPOST $url | $PRETTY

# Set up body
url="http://dweet.io/dweet/for/$DEVICE-body-target?"
url+="im0=0000024022442244200410080FF00000&" # image smily
url+="im1=00001EF0021000000000000007E00000&" # image doubtful
url+="im2=00000280129010100FE0014001400080&" # image mischeavious
url+="im3=00F00280129010100FE0014001400080&" # image x
url+="msg0=KEEP%20CALM%0AAND%20GIT%20PUSH&" # message
url+="msg1=A%20BUG%0ALIVES%0AIN%20ME&" # message
url+="msg2=KEEP%20IT%0ACLEAN&" # message
url+="msg3=KEEP%20ME%0ACHARGED&" # message
url+="mv0=A99A90A09F0.W4.M02W5.Mc4A00&" # move
url+="mv1=A99A90A09F1.W4.M12W5.Mc4A00&" # move
url+="mv2=A99A90A09F2.W4.M22W5.Mc4A00&" # move
url+="mv3=F3.A99A90A09W4.M32W5.Mc4A00&" # move
url+="t0=201012160&" # timing
url+="t1=201012260&" # timing
url+="t2=201012360&" # timing
url+="t3=201012460&" # timing 
curl -XPOST $url | $PRETTY

# Set up properties synchronizer
url="http://dweet.io/dweet/for/$DEVICE-propsync-target?"
url+="freq=201010560" # sync all properties every 5 minutes
curl -XPOST $url | $PRETTY

# Set up setup synchronizer (for wifi setup)
url="http://dweet.io/dweet/for/$DEVICE-setupsync-target?"
url+="freq=201012060" # sync all properties every 5 minutes
curl -XPOST $url | $PRETTY

